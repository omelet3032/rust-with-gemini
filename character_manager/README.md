완전 공감합니다! 똑같은 "가전제품 켜기/끄기" 예제만 반복하면 뇌가 금방 지루함을 느끼죠. 이번에는 형식을 확 바꿔서, **'게임 시스템 설계'** 느낌으로 난이도를 높여보겠습니다.

단순한 관리가 아니라, **'데이터의 변이(Mutation)'**와 **'상태 기반의 복합적인 판단'**이 필요한 시스템입니다.

---

## 🎮 던전 탐험 시스템: 캐릭터 상태 관리자

이번 프로젝트는 캐릭터가 아이템(포션, 독, 강화 주문서)을 사용했을 때 **상태가 어떻게 변하는지**를 설계하는 것입니다.

### 📋 프로젝트 규칙

1. **캐릭터 구조체 (`Character<'a>`)**:
    - 이름(`name`)은 **라이프타임 `'a'`*를 가진 참조(`&str`)여야 합니다. (메모리 아끼기)
    - 현재 체력(`hp: u32`) 필드를 가집니다.
2. **아이템 열거형 (`Item`)**:
    - `Potion(u32)`: 체력을 회복시킴.
    - `Poison(u32)`: 체력을 깎음.
    - `Warp`: 공간 이동 (현재 시스템에서 지원하지 않음).
3. **에러 시스템 (`DungeonError`)**:
    - `Dead`: 체력이 0이 되었을 때.
    - `NotSupported`: 지원하지 않는 아이템(Warp 등)을 썼을 때.
4. **트레이트 (`Usable`)**:
    - `fn use_on<F>(&self, target: &mut Character, effect: F) -> Result<(), DungeonError>`
    - **핵심:** 이번엔 `Character`를 **가변 참조(`&mut`)**로 받아서 직접 상태를 수정하세요.
    - 클로저 `F`는 `FnOnce(u32) -> u32`로, 체력 변화 수치를 계산합니다.

### 🚀 지루함을 깰 '차별점' (Challenge)

- **`&mut` (가변 참조) 활용:** 이전엔 새로운 가전을 반환했지만, 이번엔 **원본 캐릭터의 HP를 직접 깎거나 채워야 합니다.**
- **상태 판정:** 아이템 사용 후 캐릭터 HP가 0이면 즉시 `Err(DungeonError::Dead)`를 던지세요.
- **오버플로 방지:** 체력을 회복할 때 `u32` 최대치를 넘지 않도록 주의하세요 (지난번 패닉 기억하시죠?).

---

### 🛠️ 미션 베이스 (최소한의 코드)

Rust

```rust
// 1. DungeonError (Dead, NotSupported)
// 2. Character<'a> { name: &'a str, hp: u32 }
// 3. Item { Potion(u32), Poison(u32), Warp }

// 4. Usable 트레이트 정의
// 5. Item에 대해 Usable 구현 
//    (logic 실행 후 target.hp를 업데이트하고, 0이면 Dead 에러 반환)

fn main() {
    let mut warrior = Character { name: "Warrior", hp: 50 };
    
    // 시나리오 1: 포션 사용 (+30) -> HP 80
    
    // 시나리오 2: 강력한 독 사용 (-100) -> Dead 에러 발생 확인
    // 시나리오 3: Warp 사용 -> NotSupported 에러 확인
    
    // ※ 팁: 에러 발생 시 '?' 연산자를 쓰려면 별도의 함수(apply_item 등)를 만드세요.
}
```

### 💡 이번 프로젝트가 지난번과 다른 이유

1. **반환값이 아닌 부수 효과(Side Effect):** `Result<Appliance, ...>`처럼 새 데이터를 만드는 게 아니라, `Result<(), ...>`를 반환하면서 **기존 데이터(`&mut Character`)를 수정**하는 실무적인 패턴입니다.
2. **가변성(Mutability):** `&mut`을 다루면서 Rust의 소유권 시스템이 "누가 데이터를 고치고 있는가"를 얼마나 엄격하게 감시하는지 체감하게 됩니다.
3. **로직의 선후 관계:** 아이템의 수치를 먼저 계산할지, 아니면 적용 후에 체력을 검사할지 설계의 우선순위를 정해야 합니다.

지루함이 조금 가시나요? **"워리어에게 독약을 먹여서 죽이는(!)"** 시스템부터 차근차근 설계해 보세요. 라이프타임 `'a`는 여전히 워리어의 이름표를 든든하게 지켜줄 것입니다!

**어떤 부분(에러 정의? 아니면 트레이트 설계?)부터 코딩을 시작해 볼까요?**